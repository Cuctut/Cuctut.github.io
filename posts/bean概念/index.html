<!DOCTYPE html>
<html><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Cuctut&#39;s blog | Bean概念</title>
    <meta name="description" content=" ">
    <link rel="canonical" href="https://cuctut.github.io/posts/bean%E6%A6%82%E5%BF%B5/" />
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
    <meta property="og:title" content="Bean概念" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cuctut.github.io/posts/bean%E6%A6%82%E5%BF%B5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-05-22T08:19:22+08:00" />
<meta property="article:modified_time" content="2022-05-22T00:00:00+00:00" />
<meta property="og:see_also" content="https://cuctut.github.io/posts/beanfactory%E5%92%8Capplicationcontext/" /><meta property="og:see_also" content="https://cuctut.github.io/posts/spring%E6%A6%82%E5%BF%B5%E7%AF%87/" />


    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Bean概念"/>
<meta name="twitter:description" content=""/>

    
        
    

    <link rel="stylesheet" href='/css/style.css' />
    <link rel="stylesheet" href='/css/search.css' />
    <link rel="stylesheet" href='/css/md_nb.css' />
    <link rel="stylesheet" href='/css/list.css' />
    <link rel="stylesheet" href='/css/terms.css' />
    <link rel="stylesheet" href='/css/taxonomy.css' />
    <link rel="stylesheet" href='/css/font-awesome-4.7.0/css/font-awesome.min.css' />
    <link rel="stylesheet" href='/css/home.css' />
    <link rel="stylesheet" href='/css/syntax.css' />
    
    <link rel="stylesheet" href='/css/shortcode.css' />
    
    
    <link rel="stylesheet" href='/css/_custom.css' />
    <style>
         
    </style>
    
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
        <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>
    
    
    
    
    <script src="/js/lazysizes.min.js" async=""></script>
    <script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="/js/search.js"></script>
    <script src="/js/md_nb.js"></script>
    <script src="/js/yes.js"></script>
    
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    
</head><body style="font-family: ,'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'Heiti SC', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;">
        <div class="loading">
            <div class="loading-bg"></div>
            <div class="loading-long">
                <div class="loading-short"></div>
            </div>
        </div>

        <header>
    <nav class="navbar">
        <div class="navbar-brand">
            <a href="/">
                <span class="logo">Cuctut&#39;s blog</span>
            </a>
        </div>
        <div class="navbar-menu">
            
                <a href="/portfolio">
                    <div class="menu-item">
                        <div class="hengtiao-root">
                            <div class="hengtiao"></div>
                            <div class="name text-wbd-reverse"><i class='fa fa-spin fa-star'></i> 作品集</div>
                        </div>
                    </div>
                </a>
            
                <a href="/">
                    <div class="menu-item">
                        <div class="hengtiao-root">
                            <div class="hengtiao"></div>
                            <div class="name text-wbd-reverse"><i class='fa fa-home'></i> 主页</div>
                        </div>
                    </div>
                </a>
            
                <a href="/posts">
                    <div class="menu-item">
                        <div class="hengtiao-root">
                            <div class="hengtiao"></div>
                            <div class="name text-wbd-reverse"><i class='fa fa-book'></i> 文章</div>
                        </div>
                    </div>
                </a>
            
                <a href="/categories">
                    <div class="menu-item">
                        <div class="hengtiao-root">
                            <div class="hengtiao"></div>
                            <div class="name text-wbd-reverse"><i class='fa fa-folder-open'></i> 分类</div>
                        </div>
                    </div>
                </a>
            
                <a href="/series">
                    <div class="menu-item">
                        <div class="hengtiao-root">
                            <div class="hengtiao"></div>
                            <div class="name text-wbd-reverse"><i class='fa fa-gears'></i> 系列</div>
                        </div>
                    </div>
                </a>
            
                <a href="/tags">
                    <div class="menu-item">
                        <div class="hengtiao-root">
                            <div class="hengtiao"></div>
                            <div class="name text-wbd-reverse"><i class='fa fa-tags'></i> 标签</div>
                        </div>
                    </div>
                </a>
            
                <a href="/about">
                    <div class="menu-item">
                        <div class="hengtiao-root">
                            <div class="hengtiao"></div>
                            <div class="name text-wbd-reverse"><i class='fa fa-info-circle'></i> 关于</div>
                        </div>
                    </div>
                </a>
            
            <div class="navbar-burger">
                <div class="burger-btn"><span><i class="fa fa-navicon"></i></span></div>
            </div>
            
            
            <div class="search-in"><span><i class="fa fa-search"></i></span></div>
            
                <div class="mode">
                    <span class="sun"><i class="fa fa-sun-o"></i></span>
                    <span class="moon"><i class="fa fa-moon-o"></i></span>
                </div>
            
        </div>
    </nav>
    <div class="burger-items">
        
        <a href="/portfolio">
            <div class="burger-item">
                <i class='fa fa-spin fa-star'></i> 作品集
            </div>
        </a>
        
        <a href="/">
            <div class="burger-item">
                <i class='fa fa-home'></i> 主页
            </div>
        </a>
        
        <a href="/posts">
            <div class="burger-item">
                <i class='fa fa-book'></i> 文章
            </div>
        </a>
        
        <a href="/categories">
            <div class="burger-item">
                <i class='fa fa-folder-open'></i> 分类
            </div>
        </a>
        
        <a href="/series">
            <div class="burger-item">
                <i class='fa fa-gears'></i> 系列
            </div>
        </a>
        
        <a href="/tags">
            <div class="burger-item">
                <i class='fa fa-tags'></i> 标签
            </div>
        </a>
        
        <a href="/about">
            <div class="burger-item">
                <i class='fa fa-info-circle'></i> 关于
            </div>
        </a>
        
    </div>
    <div class="header-rest"></div>
</header>


        <div id="content">








    <div class="hero">
        
            <div class="hero-img">
                <img class="lazyload" src="/images/thumbnail.gif" data-src="https://images.unsplash.com/photo-1586685983913-5b3003fef6b3?ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&amp;auto=format&amp;fit=crop&amp;w=2070&amp;q=80" alt="">
            </div>
        
        <div class="hero-content">
            <div class="hero-title">Bean概念</div>
            <div class="hero-subtitle"></div>
            <div class="hero-date">
                    <span class="no-wrap"><i class="fa fa-calendar"></i> 发布于: 2022-5-22 &nbsp;</span>
                    <span class="no-wrap"><i class="fa fa-calendar-check-o"></i> 更新于: 2022-5-22 &nbsp;</span>
                    <span class="no-wrap"><i class="fa fa-folder"></i>
                        收录于:
                        
                            <a href='
                                /categories/java-spring
                            '>
                                Java Spring
                            </a>
                    </span>    
            </div>
            <div class="timelong">
                <span class="no-wrap"><i class="fa fa-pencil"></i> 文章字数: 2357 &nbsp;</span>
                <span class="no-wrap"><i class="fa fa-clock-o"></i> 阅读时间: 5 分钟 &nbsp;</span>
                <span class="no-wrap"><i class="fa fa-eye"></i> 阅读量: <span id="busuanzi_value_page_pv"></span></span>
            </div>
        </div>
    </div>




<div class="zhuti-0">
    <div class="container">
        <div class="zhuti">
            <div class="zhuti-l">
                




    


<div class="content-root">
    <div class="long">
        <button class="tosides-1 text-wbd">
            <i class="fa fa-arrow-right"></i>
        </button>
        <button class="tosides-2 text-wbd">
            <i class="fa fa-arrow-left"></i>
        </button>
        <button class="toup text-wbd">
            <i class="fa fa-arrow-up"></i>
        </button>
    </div>
    
        <div class="content">
            <div class="content-self">
                <h1 id="什么是-spring-bean">什么是 Spring Bean？</h1>
<p><strong>Spring Bean</strong> 是指在Spring容器中被管理的对象。可以是任何的Java对象，如实体类、服务类、数据访问对象(DAO)等。它们被 Spring IOC 容器初始化，装配，和管理。这些 Bean 根据容器中配置的元数据创建。比如，以 XML 文件中的形式定义。</p>
<blockquote>
<p>tip
传统 Java Bean 由开发人员手动创建和管理生命周期，手动处理依赖关系，配置通常在代码中直接进行，维护性差。由于没有 AOP 概念，若要实现诸如事务管理、日志记录等横切功能，传统 Java Bean 通常需要开发人员手动编写和管理横切逻辑。而 Spring Bean 的特点解决了这些问题。</p>
</blockquote>
<h2 id="bean的特点">Bean的特点</h2>
<p>Spring Bean具有以下特点：</p>
<ul>
<li><strong>生命周期管理</strong>：Spring 容器负责Bean的生命周期，它负责在需要时创建Bean实例、初始化 Bean、将依赖注入到 Bean 中以及在不再需要时销毁 Bean 实例。</li>
<li><strong>依赖注入</strong>：Spring 容器通过依赖注入机制自动解决 Bean 之间的依赖关系。这意味着你可以使用注解或配置将其他 Bean 注入到你的 Bean 中，从而实现解耦和灵活性。</li>
<li><strong>配置灵活性</strong>：Spring 容器允许通过配置文件或注解来定义 Bean 及其属性。这使得你可以轻松修改 Bean 的配置，而无需修改源代码。</li>
<li><strong>面向切面编程（AOP）</strong>：Spring 的 AOP 功能可以与 Bean 一起使用，使你能够在应用程序中轻松实现横切关注点，例如日志记录、事务管理等。</li>
</ul>
<h2 id="bean的定义">Bean的定义</h2>
<p>在Spring中，可以通过配置元数据来定义Bean，包括Bean的类型、属性值和依赖关系等。
有三种重要的方法给 Spring 容器提供配置元数据：</p>
<ul>
<li>基于 XML 的配置</li>
<li>基于 注解 的配置</li>
<li>基于 java类 的配置</li>
</ul>
<h2 id="bean的作用域">Bean的作用域</h2>
<p>Spring框架支持以下五种Bean的作用域：</p>
<ol>
<li><strong>singleton</strong> : Bean 在每个 Spring ioc 容器中只有一个实例。</li>
<li><strong>prototype</strong>：一个 Bean 的定义可以有多个实例。</li>
<li><strong>request</strong>：每次 http 请求都会创建一个 Bean，该作用域仅在基于 web 的 Spring ApplicationContext 情形下有效。</li>
<li><strong>session</strong>：在一个 HTTP Session 中，一个 Bean 定义对应一个实例。该作用域仅在基于 web 的 Spring ApplicationContext 情形下有效。</li>
<li><strong>global-session</strong>：在一个全局的 HTTP Session 中，一个 Bean 定义对应一个实例。该作用域仅在基于 web 的Spring ApplicationContext 情形下有效。</li>
</ol>
<blockquote>
<p>tip
缺省的 Spring Bean 的作用域是Singleton。使用 prototype 作用域需要慎重的思考，因为频繁创建和销毁 Bean 会带来很大的性能开销。</p>
</blockquote>
<h1 id="bean的生命周期">Bean的生命周期</h1>
<p><img src="/images/creatBean.png" alt="CreatBean"></p>
<p>Spring 容器管理 Bean 的整个生命周期，包括以下关键步骤：</p>
<ol>
<li>
<p><strong>实例化</strong>（Instantiation）：</p>
<ul>
<li>根据 Bean 的定义，Spring 容器实例化 Bean 对象，并将其存储在容器中。Spring 框架会取出 BeanDefinition 的信息进行判断当前 Bean 的范围是否是 singleton 的，是否不是延迟加载的，是否不是 FactoryBean 等，最终将一个普通的 singleton 的 Bean 通过<strong>反射</strong>进行实例化；</li>
</ul>
</li>
<li>
<p><strong>属性注入</strong>（Dependency Injection）：</p>
<ul>
<li>Spring 容器检测 Bean 的<strong>依赖关系</strong>并将所需的依赖注入到 Bean 中，例如通过构造函数注入或 Setter 方法注入。</li>
</ul>
</li>
<li>
<p><strong>初始化</strong>（Initialization）：</p>
<ul>
<li>Bean 创建之后还仅仅是个&quot;半成品&quot;，还需要对 Bean 实例的属性进行填充、执行一些 Aware 接口方法、执行 BeanPostProcessor 方法、执行 InitializingBean 接口的初始化方法、执行自定义初始化init方法等。如果 Bean 实现了 InitializingBean 接口或在配置中指定了初始化方法，Spring 容器将调用 Bean 的初始化方法。</li>
</ul>
</li>
<li>
<p><strong>使用</strong>（In Use）：</p>
<ul>
<li>经过初始化阶段，Bean就成为了一个完整的Spring Bean，被存储到单例池 singletonObjects 中去了，Bean 可以在应用程序的其他组件中使用，执行它们的业务逻辑。</li>
</ul>
</li>
<li>
<p><strong>销毁</strong>（Destruction）：</p>
<ul>
<li>如果 Bean 实现了 DisposableBean 接口或在配置中指定了销毁方法，Spring 容器在销毁时调用 Bean 的销毁方法。</li>
</ul>
</li>
</ol>
<h2 id="bean的实例化过程">Bean的实例化过程</h2>
<ul>
<li>读取 BeanDefinition 到 BeanDefinitionMap</li>
<li>执行 BeanDefinitionRegistryPostProcessor</li>
<li>执行 BeanDefinitionPostProcessor</li>
<li>创建 Bean 实例</li>
</ul>
<h2 id="bean的初始化过程">Bean的初始化过程</h2>
<ul>
<li>Bean 实例的属性填充</li>
<li>Aware 接口属性注入</li>
<li>BeanPostProcessor 的 before() 方法回调</li>
<li>InitializingBean 接口的初始化方法回调</li>
<li>自定义初始化方法 init 回调</li>
<li>BeanPostProcessor 的 after() 方法回调</li>
</ul>
<h2 id="bean的三级缓存">Bean的三级缓存</h2>
<p>Spring 提供了三级缓存存储完整 Bean 实例 和 半成品 Bean 实例，用于解决循环引用问题。</p>
<p>在 DefaultListableBeanFactory 的上四级父类 DefaultSingletonBeanRegistry 中提供如下三个Map：</p>
<p><img src="/images/3layers.png" alt="3layers"></p>
<h1 id="bean的线程安全问题">Bean的线程安全问题</h1>
<p>在 Spring 框架中，默认情况下，<strong>单例</strong> Bean 是线程安全的。Spring 容器在创建单例 Bean 时会确保只有一个实例，并在需要时共享该实例。这意味着多个线程可以<strong>同时访问同一个单例 Bean 实例</strong>，而无需担心并发问题。</p>
<p>Spring 实现单例 Bean 的线程安全性有以下几个方面：</p>
<ol>
<li>
<p><strong>无状态Bean</strong>：Spring 鼓励在单例 Bean 中避免使用实例变量（或将其保持在只读状态），从而避免了多个线程之间共享状态的风险。如果单例 Bean 是无状态的，那么多个线程之间并发访问不会引发竞态条件。</p>
</li>
<li>
<p><strong>依赖注入</strong>： Spring 通过依赖注入的方式来管理 Bean 之间的依赖关系。当多个线程同时访问一个单例 Bean 时，它们将共享相同的依赖项实例。由于依赖项是单独的 Bean 实例，并且默认也是单例的，因此它们可以安全地被多个线程共享。</p>
</li>
<li>
<p><strong>线程封闭性</strong>： Spring 单例 Bean 默认是无状态的，但如果需要在单例 Bean 中使用可变状态，则可以使用线程封闭性来确保线程安全。线程封闭性是指将可变状态限制在每个线程的范围内，每个线程独立拥有自己的状态实例。通过使用线程封闭性，可以确保每个线程独立访问自己的状态，从而避免并发问题。</p>
</li>
</ol>
<h2 id="多线程下spring如何确保有状态的bean的线程安全">多线程下，Spring如何确保有状态的Bean的线程安全</h2>
<p>在一般情况下，只有无状态的 Bean 才可以在多线程环境下共享，在 Spring 中，绝大部分 Bean 都可以声明为 singleton 作用域，因为 Spring 对一些 Bean 中非线程安全状态采用 ThreadLocal 进行处理，解决线程安全问题。</p>
<p>ThreadLocal和线程同步机制都是为了解决多线程中相同变量的访问冲突问题。同步机制采用了“时间换空间”的方式，仅提供一份变量，不同的线程在访问前需要获取锁，没获得锁的线程则需要排队。而ThreadLocal采用了“空间换时间”的方式。ThreadLocal会为每一个线程提供一个独立的变量副本，从而隔离了多个线程对数据的访问冲突。因为每一个线程都拥有自己的变量副本，从而也就没有必要对该变量进行同步了。ThreadLocal提供了线程安全的共享对象，在编写多线程代码时，可以把不安全的变量封装进ThreadLocal。</p>
            </div>
            
                <div class="tags">
                    
                    <span class="down-type-item">
                        <div class="type-text">
                            <a href='
                                        /tags/java-spring
                                    '>
                                <i class="fa fa-tag"></i> Java Spring
                            </a>
                        </div>
                    </span>
                    
                </div>
            
        </div>
        
            
                <div class="pre-next">
                    
    
        
        <a href="https://cuctut.github.io/posts/beanfactory%E5%92%8Capplicationcontext/" class="pre pre-last" style="text-align: center;">
            <span class="pre-icon"><i class="fa fa-hand-o-left"></i></span>
            <div class="pre-title-root">
                <span>BeanFactory和ApplicationContext</span>
            </div>
        </a>
        
    
    

                </div>
            
        
    
</div>

    
        <div class="content-last">
            
                <button class="aixin content-last-item efct-button">
                    <i class="fa fa-heart"></i>
                </button>
            
            
        </div>
    


            </div>
            <div class="zhuti-r">
                
<div class="zhuti-r-0">
    <div class="zhuti-r-1">
        
        <div id="r1">
            

<div class="about-zuozhe">
    <div class="zuozhe">
        
            <div class="datou">
                <img class="lazyload" src="/images/thumbnail.gif" data-src="/images/author.png" alt="">
            </div>
        
        <div class="name-jianjie">
            <div class="name">Cuctut</div>
            <div class="jianjie">
                Be the change.
            </div>
        </div>
    </div>

    <div class="type">
        <a href='
                    /posts/
                '>
            <p>文章</p>
            <p>4</p>
        </a>
        <a href='
                    /categories/
                '>
            <p>分类</p>
            <p>2</p>
        </a>
        <a href='
                    /tags/
                '>
            <p>标签</p>
            <p>1</p>
        </a>
    </div>

    <a href="https://github.com/Cuctut">
        <div class="follow">Follow Me</div>
    </a>
    <div class="link">
        
        <a href="https://github.com/Cuctut" class="link-item is-hidden-desktop" title="GitHub">
            <span class="icon"><i class='fa fa-github'></i></span>
        </a>
        
        <a href="https://space.bilibili.com/172938182" class="link-item is-hidden-desktop" title="BiliBili">
            <span class="icon"><i class='fa fa-youtube'></i></span>
        </a>
        
    </div>
</div>
            <div class="mulu">
    <div class="dong"></div>
    <div class="zhi">
        <div class="wenzi">
            <div class="zhi-mulu text-wbd">目录</div>
            <div class="mulu-items">
            </div>
        </div>
    </div>
</div>
            



    
    


<div class="other">
    <div class="other-up">
        <div class="other-qita text-wbd">相关文章</div>
        <div class="xian"></div>
    </div>
    <div class="list">
        
            <a href="https://cuctut.github.io/posts/beanfactory%E5%92%8Capplicationcontext/">
                
<a href="https://cuctut.github.io/posts/beanfactory%E5%92%8Capplicationcontext/">
    <div class="list-item">
        <div class="icon-other-root">
            
                <div class="icon-other" style="background-image: url( /images/default/default3.jpg );"></div>
            
        </div>
        <div class="list-right">
            <div class="other-title">
                BeanFactory和ApplicationContext
            </div>
            <div class="other-summary"></div>
            <div class="other-date">2022-5-21</div>
        </div>
    </div>
</a>
            </a>
        
            <a href="https://cuctut.github.io/posts/spring%E6%A6%82%E5%BF%B5%E7%AF%87/">
                
<a href="https://cuctut.github.io/posts/spring%E6%A6%82%E5%BF%B5%E7%AF%87/">
    <div class="list-item">
        <div class="icon-other-root">
            
                <div class="icon-other" style="background-image: url( https://images.unsplash.com/photo-1489537235181-fc05daed5805?ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&amp;auto=format&amp;fit=crop&amp;w=2071&amp;q=80 );"></div>
            
        </div>
        <div class="list-right">
            <div class="other-title">
                Spring概念篇
            </div>
            <div class="other-summary"></div>
            <div class="other-date">2022-5-21</div>
        </div>
    </div>
</a>
            </a>
        
            <a href="https://cuctut.github.io/posts/%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B/">
                
<a href="https://cuctut.github.io/posts/%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B/">
    <div class="list-item">
        <div class="icon-other-root">
            
                <div class="icon-other" style="background-image: url( /images/default/default3.jpg );"></div>
            
        </div>
        <div class="list-right">
            <div class="other-title">
                本博客的部署
            </div>
            <div class="other-summary"></div>
            <div class="other-date">2022-4-21</div>
        </div>
    </div>
</a>
            </a>
        
    </div>
</div>
        </div>
        <div id="r2">
            
        </div> 
    </div>
</div>

            </div>
        </div>
    </div>
</div>

    

<div class="sponsor">
    <div class="sponsor-self">
        <div class="sponsor-title">赞赏</div>
        <div class="sponsor-btn">
            
                
                    
                        <div class="sponsor-btn-1 border-r">Wechat</div>
                    
                
                
            
                
                    
                        <div class="sponsor-btn-2 border-l">Alipay</div>
                    
                
                
            
        </div>
        
        <div class="sponsor-img">
            
                
                    <img class="sponsor-img-1" src="/images/sponsor/wechat.jpeg" alt="">
                
                
            
                
                    <img class="sponsor-img-2" src="/images/sponsor/alipay.jpeg" alt="" style="display: none;">
                
                
            
        </div>
        <div class="cancel efct-button">取消</div>
    </div>
</div>


        </div>

        <footer class="footer">
    
        <div class="container">
            <div class="footer-items">
                
                    <div class="footer-item">
                        <i class="fa fa-user"></i> <span id="busuanzi_value_site_pv"></span> |
                        <i class="fa fa-eye"></i> <span id="busuanzi_value_site_uv"></span>
                    </div>
                
                
                    <div class="footer-item">
                        © 2022-2023 <a href="https://github.com/Cuctut">Cuctut</a>
                    </div>
                
                
                    <div class="footer-item">
                        Theme by <a href="https://github.com/xioyito/NewBee">NewBee</a> | Powered by <a href="https://gohugo.io/">Hugo</a>
                    </div>
                
            </div>
        </div>
    

    
        
    <div>
        <meting-js
            server = "netease"
            type = "playlist"
            id = "482655706"
            fixed = "true"
            autoplay = "false"
            loop = "all"
            order = "list"
            preload = "auto"
            list-folded = ""
            list-max-height = "250px"
            lrc-type = "1">
        </meting-js>
    </div>

    
</footer>


        
        <div class="search-root">
    <div class="search-zz"></div>
    <div class="search">
        <div class="sheader anniu">
            <div class="sh-l">
                <input type="text" placeholder='请输入关键词' id="search-key">
                <span class="sclear"><i class="fa fa-close"></i></span>
            </div>
            <div class="sh-r">
                <button>搜索</button>
            </div>
        </div>
        <div class="sbody">
            <div class="sbody-1">
                <div class="stip"></div>
            </div>
        </div>
    </div>
</div>
        









    
    

    
    

    
    

    
    


<script type="text/javascript">
    var mode_custom = "auto";
    var postsCount =  4 ;
    var arrPosts = [{"link":"https://cuctut.github.io/posts/bean%E6%A6%82%E5%BF%B5/","plain":"什么是 Spring Bean？ Spring Bean 是指在Spring容器中被管理的对象。可以是任何的Java对象，如实体类、服务类、数据访问对象(DAO)等。它们被 Spring IOC 容器初始化，装配，和管理。这些 Bean 根据容器中配置的元数据创建。比如，以 XML 文件中的形式定义。\ntip 传统 Java Bean 由开发人员手动创建和管理生命周期，手动处理依赖关系，配置通常在代码中直接进行，维护性差。由于没有 AOP 概念，若要实现诸如事务管理、日志记录等横切功能，传统 Java Bean 通常需要开发人员手动编写和管理横切逻辑。而 Spring Bean 的特点解决了这些问题。\nBean的特点 Spring Bean具有以下特点：\n生命周期管理：Spring 容器负责Bean的生命周期，它负责在需要时创建Bean实例、初始化 Bean、将依赖注入到 Bean 中以及在不再需要时销毁 Bean 实例。 依赖注入：Spring 容器通过依赖注入机制自动解决 Bean 之间的依赖关系。这意味着你可以使用注解或配置将其他 Bean 注入到你的 Bean 中，从而实现解耦和灵活性。 配置灵活性：Spring 容器允许通过配置文件或注解来定义 Bean 及其属性。这使得你可以轻松修改 Bean 的配置，而无需修改源代码。 面向切面编程（AOP）：Spring 的 AOP 功能可以与 Bean 一起使用，使你能够在应用程序中轻松实现横切关注点，例如日志记录、事务管理等。 Bean的定义 在Spring中，可以通过配置元数据来定义Bean，包括Bean的类型、属性值和依赖关系等。 有三种重要的方法给 Spring 容器提供配置元数据：\n基于 XML 的配置 基于 注解 的配置 基于 java类 的配置 Bean的作用域 Spring框架支持以下五种Bean的作用域：\nsingleton : Bean 在每个 Spring ioc 容器中只有一个实例。 prototype：一个 Bean 的定义可以有多个实例。 request：每次 http 请求都会创建一个 Bean，该作用域仅在基于 web 的 Spring ApplicationContext 情形下有效。 session：在一个 HTTP Session 中，一个 Bean 定义对应一个实例。该作用域仅在基于 web 的 Spring ApplicationContext 情形下有效。 global-session：在一个全局的 HTTP Session 中，一个 Bean 定义对应一个实例。该作用域仅在基于 web 的Spring ApplicationContext 情形下有效。 tip 缺省的 Spring Bean 的作用域是Singleton。使用 prototype 作用域需要慎重的思考，因为频繁创建和销毁 Bean 会带来很大的性能开销。\nBean的生命周期 Spring 容器管理 Bean 的整个生命周期，包括以下关键步骤：\n实例化（Instantiation）：\n根据 Bean 的定义，Spring 容器实例化 Bean 对象，并将其存储在容器中。Spring 框架会取出 BeanDefinition 的信息进行判断当前 Bean 的范围是否是 singleton 的，是否不是延迟加载的，是否不是 FactoryBean 等，最终将一个普通的 singleton 的 Bean 通过反射进行实例化； 属性注入（Dependency Injection）：\nSpring 容器检测 Bean 的依赖关系并将所需的依赖注入到 Bean 中，例如通过构造函数注入或 Setter 方法注入。 初始化（Initialization）：\nBean 创建之后还仅仅是个\u0026quot;半成品\u0026quot;，还需要对 Bean 实例的属性进行填充、执行一些 Aware 接口方法、执行 BeanPostProcessor 方法、执行 InitializingBean 接口的初始化方法、执行自定义初始化init方法等。如果 Bean 实现了 InitializingBean 接口或在配置中指定了初始化方法，Spring 容器将调用 Bean 的初始化方法。 使用（In Use）：\n经过初始化阶段，Bean就成为了一个完整的Spring Bean，被存储到单例池 singletonObjects 中去了，Bean 可以在应用程序的其他组件中使用，执行它们的业务逻辑。 销毁（Destruction）：\n如果 Bean 实现了 DisposableBean 接口或在配置中指定了销毁方法，Spring 容器在销毁时调用 Bean 的销毁方法。 Bean的实例化过程 读取 BeanDefinition 到 BeanDefinitionMap 执行 BeanDefinitionRegistryPostProcessor 执行 BeanDefinitionPostProcessor 创建 Bean 实例 Bean的初始化过程 Bean 实例的属性填充 Aware 接口属性注入 BeanPostProcessor 的 before() 方法回调 InitializingBean 接口的初始化方法回调 自定义初始化方法 init 回调 BeanPostProcessor 的 after() 方法回调 Bean的三级缓存 Spring 提供了三级缓存存储完整 Bean 实例 和 半成品 Bean 实例，用于解决循环引用问题。\n在 DefaultListableBeanFactory 的上四级父类 DefaultSingletonBeanRegistry 中提供如下三个Map：\nBean的线程安全问题 在 Spring 框架中，默认情况下，单例 Bean 是线程安全的。Spring 容器在创建单例 Bean 时会确保只有一个实例，并在需要时共享该实例。这意味着多个线程可以同时访问同一个单例 Bean 实例，而无需担心并发问题。\nSpring 实现单例 Bean 的线程安全性有以下几个方面：\n无状态Bean：Spring 鼓励在单例 Bean 中避免使用实例变量（或将其保持在只读状态），从而避免了多个线程之间共享状态的风险。如果单例 Bean 是无状态的，那么多个线程之间并发访问不会引发竞态条件。\n依赖注入： Spring 通过依赖注入的方式来管理 Bean 之间的依赖关系。当多个线程同时访问一个单例 Bean 时，它们将共享相同的依赖项实例。由于依赖项是单独的 Bean 实例，并且默认也是单例的，因此它们可以安全地被多个线程共享。\n线程封闭性： Spring 单例 Bean 默认是无状态的，但如果需要在单例 Bean 中使用可变状态，则可以使用线程封闭性来确保线程安全。线程封闭性是指将可变状态限制在每个线程的范围内，每个线程独立拥有自己的状态实例。通过使用线程封闭性，可以确保每个线程独立访问自己的状态，从而避免并发问题。\n多线程下，Spring如何确保有状态的Bean的线程安全 在一般情况下，只有无状态的 Bean 才可以在多线程环境下共享，在 Spring 中，绝大部分 Bean 都可以声明为 singleton 作用域，因为 Spring 对一些 Bean 中非线程安全状态采用 ThreadLocal 进行处理，解决线程安全问题。\nThreadLocal和线程同步机制都是为了解决多线程中相同变量的访问冲突问题。同步机制采用了“时间换空间”的方式，仅提供一份变量，不同的线程在访问前需要获取锁，没获得锁的线程则需要排队。而ThreadLocal采用了“空间换时间”的方式。ThreadLocal会为每一个线程提供一个独立的变量副本，从而隔离了多个线程对数据的访问冲突。因为每一个线程都拥有自己的变量副本，从而也就没有必要对该变量进行同步了。ThreadLocal提供了线程安全的共享对象，在编写多线程代码时，可以把不安全的变量封装进ThreadLocal。\n","pubDate":"2022-05-22","title":"Bean概念"},{"link":"https://cuctut.github.io/posts/beanfactory%E5%92%8Capplicationcontext/","plain":"BeanFactory BeanFactory 简单粗暴，可以理解为就是个 HashMap，Key 是 BeanName，Value 是 Bean 实 例。通常只提供注册（put），获取（get）这两个功能，可以称之为 “低级容器”。\nBeanFactory简单用法\nApplicationContext ApplicationContext 可以称之为 “高级容器”。因为他比 BeanFactory 多了更多的功能。他继承了多个接口。因此具备了更多的功能。例如资源的获取，支持多种消息（例如 JSP tag 的支持），对 BeanFactory 多了工具级别的支持等待。所以你看他的名字，已经不是 BeanFactory 之类的工厂了，而是 “应用上下文”， 代表着整个大容器的所有功能。该接口定义了一个 refresh 方法，此方法是所有阅读 Spring 源码的人的最熟悉的方法，用于刷新整个容器，即重新加载/刷新所有的 bean。\nApplicationContext简单用法\n两者的关系 原笔记\n继承 在 IDEA 内查看 ApplicationContext 的继承体系，如下：\nApplicationContext 接口继承自 BeanFactory\n先后 BeanFactory 是 Spring 的早期接口，称为 Spring 的 Bean 工厂； ApplicationContext 是后期更高级接口,称之为 Spring 容器； 扩展 Bean 创建的主要逻辑和功能都被封装在 BeanFactory 中，ApplicationContext 继承了 BeanFactory，内部还维护着 BeanFactory 的引用，ApplicationContext 在 BeanFactory 基础上对功能进行了扩展，如：监听功能、国际化功能等。BeanFactory 的 API 更偏向底层，ApplicationContext 的 API 大多数是对这些底层 API 的封装;\n继承MessageSource，因此支持国际化。 统一的资源文件访问方式。 提供在监听器中注册bean的事件。 同时加载多个配置文件。 载入多个（有继承关系）上下文 ，使得每一个上下文都专注于一个特定的层次，比如应用的web层。 所以, ApplicationContext 与 BeanFactory 既有继承关系，又有融合关系。\n两者的区别 Bean 的初始化时机 BeanFactroy 采用的是延迟加载形式来注入 Bean 的，即只有在使用到某个 Bean 时(调用getBean())，才对该 Bean 进行加载实例化。这样，我们就不能发现一些存在的Spring的配置问题。如果Bean的某一个属性没有注入，BeanFacotry 加载后，直至第一次使用调用 getBean 方法才会抛出异常。 ApplicationContext 是在容器启动时，一次性创建了所有的Bean。这样，在容器启动时，我们就可以发现 Spring 中存在的配置错误，这样有利于检查所依赖属性是否注入。ApplicationContext 启动后预载入所有的单实例Bean，通过预载入单实例 bean，确保当你需要的时候，就不用等待，因为它们已经创建好了。 创建方式 BeanFactory 通常以编程的方式被创建，ApplicationContext 还能以声明的方式创建，如使用 ContextLoader。\n注册方式 两者都支持BeanPostProcessor、BeanFactoryPostProcessor的使用，但两者之间的区别是：\nBeanFactory 需要手动注册，而 ApplicationContext 则是自动注册。\n其他 ApplicationContext 常用实现 FileSystemXmlApplicationContext ：此容器从一个XML文件中加载beans的定义，XML Bean 配置文件的全路径名必须提供给它的构造函数。 ClassPathXmlApplicationContext：此容器也从一个XML文件中加载beans的定义，这里，需要正确设置classpath因为这个容器将在classpath里找bean配置。 WebXmlApplicationContext：此容器加载一个XML文件，此文件定义了一个WEB应用的所有 bean。 ","pubDate":"2022-05-21","title":"BeanFactory和ApplicationContext"},{"link":"https://cuctut.github.io/posts/spring%E6%A6%82%E5%BF%B5%E7%AF%87/","plain":"为什么使用Spring框架？ 轻量：解决企业级应用开发的复杂性，即简化Java开发 IOC：通过IOC容器对Bean的生命周期进行管理，让开发者只需关心业务的需求，同时实现对象依赖松耦合的管理 AOP：通过切面的方式对功能进行增强，减少代码的侵入性 MVC：Spring提供SpringMVC框架对Web开发进行支持 事务管理：声明式事务的支持，只需要通过配置就可以完成对事务的管理，可以通过AOP实现对事务的统一管理 生态支持：拥有强大的生态和社区 Spring模块 Spring模块有大约 20 个，它们提供的特性组成了Spring框架。\n这些模块分：Core Container, Data Access/Integration, Web, AOP, Instrumentation, Messaging 和 Test，如下图所示。\nSpring的两大核心概念 IOC（Inversion of Control，控制反转）和AOP（Aspect-Oriented Programming，面向切面编程）是两种开发中的重要概念。\nIOC (Inversion of Control，控制反转) IOC是一种设计原则，它将控制权的获取和管理从应用程序代码转移到一个外部容器或框架。在传统的编程模型中，应用程序代码通常会直接创建和管理对象的依赖关系。而在IOC模式下，应用程序通过定义对象之间的依赖关系，并且将对象的创建和生命周期交给外部容器来管理。外部容器负责创建、装配和管理对象，并且在需要时将对象注入到应用程序中。这样可以实现对象之间的解耦和灵活性。\nIOC 的实现机制 Spring 中的 IOC 的实现原理就是工厂模式加反射机制。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 interface Fruit { public abstract void eat(); } class Apple implements Fruit { public void eat(){ System.out.println(\u0026#34;Apple\u0026#34;); } } class Orange implements Fruit { public void eat(){ System.out.println(\u0026#34;Orange\u0026#34;); } } class Factory { public static Fruit getInstance(String ClassName) { Fruit f=null; try { f=(Fruit)Class.forName(ClassName).newInstance(); } catch (Exception e) { e.printStackTrace(); } return f; } } class Client { public static void main(String[] a) { Fruit f=Factory.getInstance(\u0026#34;Apple\u0026#34;); if(f!=null){ f.eat(); } } } AOP (Aspect-Oriented Programming，面向切面编程) AOP是一种编程范式，它通过将横切关注点（cross-cutting concerns）从主要业务逻辑中分离出来，实现模块化的开发和维护。横切关注点是那些存在于应用程序各个部分的功能需求，如日志记录、事务管理、安全性等，它们通常跨越多个对象和模块。AOP通过定义切面（aspect）来封装横切关注点，并将其与主要业务逻辑进行解耦。切面可以在应用程序运行时动态地织入到主要业务逻辑中，从而实现对横切关注点的统一管理和复用。\nSpring 中的设计模式 工厂模式：BeanFactory就是简单工厂模式的体现，用来创建对象的实例； 单例模式：Bean默认为单例模式； 代理模式：Spring的AOP功能用到了JDK的动态代理和CGLIB字节码生成技术； 模板方法：用来解决代码重复的问题。比如.RestTemplate, JmsTemplate, JpaTemplate； 观察者模式：定义对象键一种一对多的依赖关系，当一个对象的状态发生改变时，所有依赖于它的对象都会得到通知被制动更新，如Spring中listener的实现–ApplicationListener。 ","pubDate":"2022-05-21","title":"Spring概念篇"},{"link":"https://cuctut.github.io/posts/%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B/","plain":"前言 关于本主题的使用文档，参考了 LoveIt 和 MemE 主题。在阅读过程中如果有不太明白的地方，一定要用好你的浏览器，如果你是懒或是忘了的话，在这可提醒你一次了。话不多说，操作起来。\n安装 不同的操作系统，安装方式可能有所不同，以下的操作都是在 macOS 上完成的。对于其他操作系统，请查看 Hugo 的安装。\n安装 Hugo NewBee 主题由 Hugo 引擎驱动，Hugo 是一个快速而现代的静态网站生成器，由 Go 语言编写。\n对于 Mac 系统，Hugo 官方使用的是 Homebrew 或 MacPorts 来安装，如果你电脑里没有，请先下载一个。详情请移步：Hugo在macOS上的安装\n::: tabs\n@tab Homebrew\n1 ~ % brew install hugo @tab MacPorts\n1 ~ % port install hugo :::\n安装后验证一下是否安装成功，命令行输入：\n1 ~ % hugo version 如果输出结果类似这样：\n1 ~ % hugo v0.91.2+extended darwin/amd64 BuildDate=unknown 则安装成功。\n安装 NewBee 创建一个新项目，首先，创建一个目录作为你的博客根目录，示例目录文件名为: my-blog。Hugo 提供了通过new site命令来快速创建网站的方法：\n1 ~ % hugo new site my-blog 得到以下文件（文件的位置取决于你执行命令时所在的目录）：\nNewBee 主题的仓库是：https://github.com/xioyito/NewBee，有以下 2 种方法来安装 NewBee 主题：\n::: tabs\n@tab 方法1\n下载主题最新版本的 .zip 文件，解压后放到themes目录。\n@tab 方法2\n把主题克隆到themes目录：\n1 2 ~ % cd my-blog my-blog % git clone https://github.com/xioyito/NewBee.git themes/NewBee :::\n开始 Hugo 和 NewBee 都安装完毕后，就可以开始我们博客的 “Hello World” 了。\n替换 config.toml 进入themes/NewBee/config-example目录，复制config.toml文件，替换掉my-blog/config.toml文件。\n新建文章 1 my-blog % hugo new \u0026#34;posts/first-post.md\u0026#34; 你可能需要一个关于页面，所以：\n1 my-blog % hugo new \u0026#34;about/_index.md\u0026#34; 文章内容使用 Markdown 编辑，关于 Markdown 基本语法，请参考：Markdown 教程\n启动本地服务器 1 my-blog % hugo server -D 浏览器打开：http://localhost:1313/，这就是我们网站的首页了，你可以快速预览网站效果。\ntip 1. 当你运行hugo server -D时, 如果文件内容更改, 页面会随着更改自动刷新。\n2. hugo server -D和hugo server的差别：后者不会渲染前置参数draft: true的文章，这意味着在预览网站时你不会看到这篇文章的任何信息。\n语法高亮样式 hugo 查找文件的方式是这样的：先查找网站根目录my-blog下有没有该文件，如果没有，再查找my-blog/themes/Newbee下的。所以，理论上根目录下的任何文件都能覆盖掉主题文件下的对应文件。自定义时，建议在根目录下进行，而不是直接对主题文件进行修改，以免出错。\nHugo的语法高亮基于 chroma，并提供了足够的样式风格供你选择。如果NewBee主题默认的高亮样式不适合你，你可以参照如下方式修改：\n先进行以下操作：\n1 ~ % hugo gen chromastyles --style=你喜欢的样式名称 \u0026gt; syntax.css 这样可以得到一个syntax.css文件，文件的位置取决于你执行上述命令时所在的目录，然后将其复制到my-blog/static/css文件夹下即可。一般情况下不用再对其进行修改，当然也不是不可以，这完全取决于你的心情。\n如果你还想把深色模式下的语法高亮样式也更改了，操作同上面一样，只要在命令行操作时把syntax.css换成syntax-dark.css即可。\ntip 如果语法高亮有显示问题，对syntax.css进行修改就行，深色模式则修改syntax-dark.css。\n部署 一切准备就绪后，是时候把我们的网站放到网络上了。你可以使用 Netlify、Render、Firebase、Github 以及更多。下面简要介绍部署到Github的过程，更多方式请移步 部署和托管。\n准备 在 Github 上的部署，我们需要用到 Github Page，它是 GitHub 提供的一个网页寄存服务，可以寄存静态页面，非常适合博客的搭建。首先在自己的 Github 账号里创建一个 Repository（仓库），命名为你的Github账号名.github.io，例如我的仓库名xioyito.github.io。\n生成静态页面文件 1 my-blog % hugo 这个命令会在根目录下生成一个public目录, 其中包含你网站的所有静态内容和资源.\nwarning 在生成静态页面之前要把config.toml文件中的baseURL修改为自己博客的网址：https://你的Github账号名.github.io。\n部署到Github 进入public文件夹，使用 git 上传文件。\n1 2 3 4 5 6 my-blog % cd public public % git init # 初始化仓库 public % git remote add origin https://github.com/你的Github账号名/你的Github账号名.github.io.git # 链接远程仓库 public % git add . public % git commit -m \u0026#34;first commit\u0026#34; public % git push -u origin master 以后更新文章的时候，同样是用 hugo 生成新的页面文件，git 上传文件。\n1 2 3 4 5 my-blog % hugo my-blog % cd public public % git add . public % git commit -m \u0026#34;first commit\u0026#34; public % git push tip 上传文件到 Github 时，可能会出现和 git 的使用相关的问题，请自行百度解决。\n等一会儿，就可以打开我们的网站了：https://你的Github账号名.github.io。\ntip 等待的时长和你的网络状况有很大关系。\n避坑指南 一定要看这篇文章：避坑指南\n","pubDate":"2022-04-21","title":"本博客的部署"}];
    var search_theEnd = "到底了";
    var search_nothing = "什么也没找到";
    var search_found = "找到";
    var search_result = "条结果";
    var search_results = "条结果";
    var enable_mermaid =  null 
</script>





        
    </body>
</html>

